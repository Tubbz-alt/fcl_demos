This folder contains code that will allow you run run a Vizdoom agent against pretrained bots from Facebook and Intel. 

For setting up Vizdoom, see: http://vizdoom.cs.put.edu.pl/
To generate the results in the paper, you will need the following steps: 
Check out https://github.com/mihahauke/vizdoom_cig2017  - you will need to be able to run the host, and the bot in the folder 'intelact'. The README gives install instructions; you will need to install Docker, and also nvidia-docker if you wish to use your GPU for the bots in folders intelact or F1.

You will need to edit host/host.py to set the number of players to match the number of bots you're going to have. 
Then copy this folder, dfldoom, into vizdoom_cig2017. To build the host and Intel bots, run: 
./build.sh intelact
./build.sh host

Assuming this succeeded, you then run the host, followed by the bots:
./run.sh host
./run.sh intelact

To run the DFL bot:
cd dfldoom
python3 run_agentDFL.py learning_rate

Which run a deathmatch for the length of time specified in ../host/host.py, and will write to 3 files: 
KD.txt
wtDist.txt
DFLOutput.txt

The first logs a timestamp each time the bot is killed. To calculate a KD ratio, you will need to edit ../intelact/IntealAct_track2/run_agent.py to write the corresponding death events for the intel bot - or whichever one you are playing against. 
wtDist.txt logs the average Euclidean distance of the weights from their initial values, per layer.
DFLOutput.txt logs various measures: feedback error, bot steering action, health. See the code. 


If you wish to experiment further:
----------------------------------
There are a number of *.cfg files here - if you want to run deathmatch in the way described above, copy _vizdoomNetwork.cfg to _vizdoom.cfg. Assuming the host is already running, running run_agentDFL.py will then attempt to connect and start a match. It's crucial that all bots, and the host, are using the same Doom map. This is specified in their own .cfg files.  

There are a number of edited Doom maps to play around with - the ones called basic-multi* have been edited to have large amounts of ammo, so that the enemies do not run out of ammo and behave strangely, and also have multiple spawn positions to help increase the variability of the visual inputs. 

If you want to change the actions available to the bot, you need to edit config/config.cfg. At the moment, the bot only rotates in the plane, and shoots, so there is lots of scope for improvement!
